<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>International iBCI Patient Registry</title>

  <!-- Bootstrap CSS (CDN) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    integrity="sha384-ENjdO4Dr2bkBIFxQ2ZbMLZ12zYggK3Z1IdLGEm3Et3gq1vCIX9NtP2ImGpH6yJI6"
    crossorigin="anonymous"
  />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&display=swap"
    rel="stylesheet"
  />

  <!-- Inline CSS -->
  <style>
    /* Use a muted, modern background */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Make navbar a custom dark color or use .bg-dark */
    .navbar-custom {
      background-color: #343a40; /* Keep bootstrap dark or change to your preferred color */
    }

    /* Title in navbar */
    .navbar-brand {
      font-weight: 600;
      font-size: 1.3rem;
    }

    /* Main container uses the full width (container-fluid).
       We add some top/bottom spacing to keep layout airy. */
    .main-container {
      flex: 1; /* let this grow to fill available space */
      padding-top: 2rem;
      padding-bottom: 2rem;
    }

    /* Spacing for the "total patients" summary card */
    .summary-row {
      margin-bottom: 1.5rem;
    }

    /* Table improvements: striping and hover effects for clarity */
    table {
      width: 100%;
    }

    /* Footer pinned to bottom when content is short; add top border for separation */
    footer.footer {
      background-color: #343a40;
      color: #fff;
      text-align: center;
      padding: 1rem 0;
      margin-top: auto;
      border-top: 2px solid rgba(255, 255, 255, 0.1);
    }
  </style>
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-custom mb-4">
    <div class="container-fluid">
      <a class="navbar-brand text-white" href="#">
        International iBCI Patient Registry
      </a>
    </div>
  </nav>

  <!-- Main Content Section -->
  <div class="container-fluid main-container">
    <!-- Row for total patients summary -->
    <div class="row summary-row">
      <div class="col-12">
        <div class="alert alert-info text-center shadow-sm mb-0" role="alert">
          <strong>Total number of patients implanted with an iBCI: 80</strong>
        </div>
      </div>
    </div>

    <!-- Search Section -->
    <div class="row justify-content-center mb-4 px-3 px-md-5">
      <div class="col-12 col-md-6">
        <input
          type="text"
          id="searchInput"
          class="form-control"
          placeholder="Search by patient ID, device, lab, or publication..."
          onkeyup="filterTable()"
        />
      </div>
    </div>

    <!-- Table Section -->
    <div class="row px-3 px-md-5">
      <div class="col-12">
        <div class="table-responsive shadow-sm">
          <table class="table table-striped table-hover align-middle" id="ibciTable">
            <thead class="table-dark">
              <tr>
                <th scope="col">Patient ID</th>
                <th scope="col">Device Type</th>
                <th scope="col">Lab / Institution</th>
                <th scope="col">Publications</th>
              </tr>
            </thead>
            <tbody id="ibciTableBody">
              <!-- Rows populated by JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container-fluid">
      <p class="mb-0">
        Created by Jamie Brannigan and Esmee Dohle
      </p>
    </div>
  </footer>

  <!-- Bootstrap JS (CDN) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-5ZkYMNC6u+Jyda3/Yo60il0Z6V4UVpPE9q5k5tY/2D0/gHg+5X6xQ7MfYwR9a6RJ"
    crossorigin="anonymous"
  ></script>

  <!-- In-line JavaScript -->
  <script>
    // ====================
    // Example iBCI Data
    // ====================
    const ibciPatients = [
      {
        patientID: "P1",
        deviceType: "Utah Array",
        lab: "BrainGate Consortium",
        publications: [
          {
            title: "Neuronal ensemble control of prosthetic devices...",
            link: "https://www.nature.com/articles/nature07479"
          },
          {
            title: "High-performance communication by people with paralysis...",
            link: "https://elifesciences.org/articles/18554"
          }
        ]
      },
      {
        patientID: "P2",
        deviceType: "ECoG Grid",
        lab: "Grenoble University",
        publications: [
          {
            title: "Fully Implanted Brainâ€“Computer Interface in a Locked-In Patient...",
            link: "https://www.nejm.org/doi/10.1056/NEJMoa1608085"
          }
        ]
      },
      {
        patientID: "P3",
        deviceType: "Endovascular Stentrode",
        lab: "Synchron / Melbourne",
        publications: [
          {
            title: "Endovascular motor neuroprosthesis for severe paralysis...",
            link: "https://jnis.bmj.com/content/13/2/102"
          }
        ]
      },
      // Add or modify more records as needed
    ];

    // ====================
    // On Page Load
    // ====================
    window.onload = function() {
      populateTable();
    };

    /**
     * Populate #ibciTableBody with data from ibciPatients
     */
    function populateTable() {
      const tableBody = document.getElementById("ibciTableBody");
      tableBody.innerHTML = "";

      ibciPatients.forEach((patient) => {
        const row = document.createElement("tr");

        // Patient ID cell
        const patientCell = document.createElement("td");
        patientCell.textContent = patient.patientID;
        row.appendChild(patientCell);

        // Device Type cell
        const deviceCell = document.createElement("td");
        deviceCell.textContent = patient.deviceType;
        row.appendChild(deviceCell);

        // Lab/Institution cell
        const labCell = document.createElement("td");
        labCell.textContent = patient.lab;
        row.appendChild(labCell);

        // Publications cell
        const pubCell = document.createElement("td");
        if (patient.publications && patient.publications.length > 0) {
          const ul = document.createElement("ul");
          patient.publications.forEach((pub) => {
            const li = document.createElement("li");
            const anchor = document.createElement("a");
            anchor.href = pub.link;
            anchor.target = "_blank";
            anchor.rel = "noopener noreferrer";
            anchor.textContent = pub.title;
            li.appendChild(anchor);
            ul.appendChild(li);
          });
          pubCell.appendChild(ul);
        } else {
          pubCell.textContent = "N/A";
        }
        row.appendChild(pubCell);

        tableBody.appendChild(row);
      });
    }

    /**
     * Filters the table based on search input
     */
    function filterTable() {
      const input = document.getElementById("searchInput");
      const filter = input.value.toLowerCase();
      const tableBody = document.getElementById("ibciTableBody");
      const rows = tableBody.getElementsByTagName("tr");

      for (let i = 0; i < rows.length; i++) {
        const row = rows[i];
        const cells = row.getElementsByTagName("td");
        let match = false;

        for (let j = 0; j < cells.length; j++) {
          const cellValue = cells[j].textContent.toLowerCase();
          if (cellValue.indexOf(filter) > -1) {
            match = true;
            break;
          }
        }
        row.style.display = match ? "" : "none";
      }
    }
  </script>
</body>
</html>

